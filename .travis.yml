language: go

sudo: false

go:
  - "1.8"
  - "1.9"
  - "1.10"
  - tip

os:
  - linux
  - osx

addons:
  apt:
    packages:
      - libpcap-dev

script:
  - go test -v -race $(go list ./...)
  # Go's flag package returns 2 when a program is called with -h
  - (cd examples/packetparser && go build && ./packetparser -h; if [ $? != 2 ]; then exit 1; else exit 0; fi)
